---
title: 'Docker Compose で起動する'
---

import { TabItem, Tabs } from '@astrojs/starlight/components';

このページでははらちょを Docker Compose で起動する方法をご紹介します。

:::caution[前提条件]
前提条件として [Docker, Docker Compose がセットアップされている](https://docs.docker.com/get-docker/)必要があります。
:::

:::note
ローカルでの起動は例外なく、以下の機能が利用できません。

- **_Kawaemon has given a new role_** (かわえもん自動ロール付与機能)

この機能は限界開発鯖、およびかわえもんしか利用できないので注意してください。
:::

## リポジトリをクローンする

まずははらちょのリポジトリをクローンします。

<Tabs choiceKey="launch-way">
<TabItem label="HTTPS">

HTTPS でクローンする場合は以下のコマンドを実行してください。

```bash
git clone https://github.com/approvers/OreOreBot2.git
```

</TabItem>
<TabItem label="SSH">

SSH 経由でクローンする場合は以下のコマンドを実行してください。

```bash
git clone git@github.com:approvers/OreOreBot2.git
```

</TabItem>
<TabItem label="GitHub CLI">

GitHub CLI 経由でクローンする場合は以下のコマンドを実行してください。

```bash
gh repo clone approvers/OreOreBot2
```

</TabItem>
</Tabs>

## 環境変数を設定する

環境変数を設定します。ここでは、 `.env` で設定する例をご紹介します。

環境変数の詳細は [approvers/OreOreBot2 - 環境変数](https://github.com/approvers/OreOreBot2#%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0) をご覧ください。

環境変数のサンプルファイルをコピーします。

```bash
cp .env.example .env
```

次に、 `.env` を編集します。以下は `.env` の編集例です。

```env
DISCORD_TOKEN=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
MAIN_CHANNEL_ID=690909527461199922
GUILD_ID=683939861539192860
PREFIX=!
FEATURE=MESSAGE_CREATE,MESSAGE_UPDATE,COMMAND,VOICE_ROOM,ROLE,EMOJI
```

:::danger[トークンは絶対に外部に漏らさないでください]
Token はあなたの Discord アカウントのパスワードと同義です。絶対外に漏洩しないようにしましょう。
:::

## 起動する

次のコマンドを実行します。

```bash
docker-compose up -d
```

接続クライアント情報と依存関係レポートが表示されたら起動完了です。

```text
============
起動完了しました
有効になっている機能> MESSAGE_CREATE, MESSAGE_UPDATE, COMMAND, VOICE_ROOM, ROLE, EMOJI
接続クライアント> m2en-debug-app
接続クライアントID> 1059902535873347624
接続クライアントバージョン> 1.32.0
discord.js バージョン> 14.7.1
--------------------------------------------------
Core Dependencies
- @discordjs/voice: 0.14.0
- prism-media: 1.3.4
Opus Libraries
- @discordjs/opus: 0.9.0
- opusscript: not found
Encryption Libraries
- sodium-native: not found
- sodium: not found
- libsodium-wrappers: not found
- tweetnacl: 1.0.3
FFmpeg
- version: 5.1.2
- libopus: yes
--------------------------------------------------
============
```
